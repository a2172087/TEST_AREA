# AutoZ Wafer4P Aligner V13.0.4 修改計畫

**日期**：2025-10-31  
**版本**：V13.0.4  
**修改類型**：UI 優化與字體調整

---

## 修改概述

本次修改主要針對使用者介面的視覺優化與字體統一性調整，共包含四個修改項目：
1. 移除首頁版本標籤顯示
2. 優化步驟指示器設計（移除數字）
3. 主介面字體改為 Noto Sans TC
4. 確認並新增外部資源引用

---

## 修改項目詳細說明

### 📋 修改項目一：移除 Version Badge

**目標**：簡化首頁標題區域，移除 "Version 12.0" 顯示標籤

**影響範圍**：
- 函數：`generate_index_html()`
- 檔案位置：AutoZ_Wafer4P_Aligner_V13_0_4.py (約第 685 行)

**修改內容**：

#### HTML 部分
```html
<!-- 刪除以下代碼 -->
<span class="version-badge">Version 12.0</span>
```

#### CSS 部分
```css
/* 刪除以下整個 CSS 區塊 */
.version-badge {
    display: inline-block;
    background: linear-gradient(135deg, #4A4A4A 0%, #2C2C2C 100%);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 12px;
    margin-top: 10px;
    font-weight: 600;
    letter-spacing: 0.5px;
}
```

**修改前後對比**：
- 修改前：標題下方顯示深色背景的版本標籤
- 修改後：只保留標題與副標題，版面更簡潔

---

### 🎯 修改項目二：步驟指示器優化

**目標**：移除圓圈內的數字 1, 2, 3，改用空心/實心圓圈與打勾符號表示狀態

**影響範圍**：
- 函數：`generate_index_html()`
- 檔案位置：AutoZ_Wafer4P_Aligner_V13_0_4.py (約第 730 行起)

**修改內容**：

#### HTML 部分
```html
<!-- 修改前 -->
<div class="step-circle">1</div>
<div class="step-circle">2</div>
<div class="step-circle">3</div>

<!-- 修改後 -->
<div class="step-circle"></div>
<div class="step-circle"></div>
<div class="step-circle"></div>
```

#### CSS 部分
```css
/* 未完成狀態 - 改為空心圓圈 */
.step-circle {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: transparent;              /* 修改：透明背景 */
    border: 3px solid #E8E8E8;           /* 新增：邊框 */
    color: #999999;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 10px;
    font-weight: 700;
    font-size: 16px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* 進行中狀態 - 實心圓圈 */
.step.active .step-circle {
    background: linear-gradient(135deg, #4A4A4A 0%, #2C2C2C 100%);
    border: none;                         /* 新增：移除邊框 */
    color: white;
    box-shadow: 0 4px 12px rgba(44, 44, 44, 0.25);
    transform: scale(1.1);
}

/* 已完成狀態 - 保持打勾符號 */
.step.completed .step-circle {
    background: linear-gradient(135deg, #27AE60 0%, #229954 100%);
    border: none;                         /* 新增：移除邊框 */
    color: white;
    box-shadow: 0 4px 12px rgba(39, 174, 96, 0.25);
}

.step.completed .step-circle::before {
    content: '✓';
    font-size: 20px;
}
```

**視覺效果**：
- 未完成：⚪ 空心灰色圓圈
- 進行中：⚫ 實心深灰色圓圈
- 已完成：✅ 實心綠色圓圈 + 打勾符號

---

### 🔤 修改項目三：字體統一調整

**目標**：主介面改用 Noto Sans TC，圖表保持微軟正黑體

**影響範圍**：
- 函數：`generate_index_html()` 與 `generate_result_html()`
- 檔案位置：兩個 HTML 生成函數的 `<head>` 與 CSS 區塊

**修改內容**：

#### 1. 新增 Google Fonts 引用
```html
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoZ Wafer4P Aligner V12.0</title>
    
    <!-- 新增以下行 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
```

#### 2. 全域字體替換

**需要修改的 CSS 選擇器**（兩個 HTML 函數中）：

```css
/* generate_index_html() 中 */
body {
    font-family: "Noto Sans TC", "Segoe UI", Arial, sans-serif;  /* 修改此行 */
    background: linear-gradient(135deg, #F5F5F5 0%, #E8E8E8 100%);
    ...
}

.form-select {
    font-family: "Noto Sans TC", "Segoe UI", Arial, sans-serif;  /* 修改此行 */
    ...
}

/* generate_result_html() 中 */
body {
    font-family: "Noto Sans TC", Arial, sans-serif;  /* 修改此行 */
    margin: 0;
    ...
}

.axis-btn {
    font-family: "Noto Sans TC", Arial, sans-serif;  /* 修改此行 */
    ...
}
```

**共需修改位置**：
- `generate_index_html()`：2 處
- `generate_result_html()`：2 處

#### 3. Plotly 圖表字體（保持不變）

以下函數中的字體設定**維持原樣**：
- `create_line_chart()` - 第 233, 243, 251 行
- `create_z_anomaly_chart()` - 第 431, 441 行  
- `create_wafer_status_dashboard()` - CSS 內嵌樣式

所有圖表相關的 `font-family` 保持：
```python
font=dict(family='Microsoft JhengHei', ...)
```

---

### 🌐 修改項目四：外部資源確認

**目標**：確認現有 CDN 並新增 Google Fonts

**現有外部資源**（保持不變）：
1. **Font Awesome 6.4.0**
   - URL: `https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css`
   - 用途：圖標顯示（資料夾、檢查、資訊等圖標）

2. **Plotly Latest**
   - URL: `https://cdn.plot.ly/plotly-latest.min.js`
   - 用途：互動式圖表渲染

**新增外部資源**：
3. **Google Fonts - Noto Sans TC**
   - URL: `https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600;700&display=swap`
   - 用途：主介面繁體中文字體
   - 字重：400 (Regular), 500 (Medium), 600 (SemiBold), 700 (Bold)

**連線方式**：
- 所有資源均透過 HTTPS CDN 載入
- 無需本地檔案或額外安裝
- 使用者需要網路連線才能正常顯示

---

## 影響評估

### ✅ 優點
1. **視覺簡化**：移除版本標籤與數字，介面更簡潔現代
2. **一致性提升**：步驟狀態更直觀（空心→實心→打勾）
3. **字體優化**：Noto Sans TC 對繁體中文顯示效果更佳
4. **閱讀體驗**：圖表保持微軟正黑體確保數據可讀性

### ⚠️ 注意事項
1. **網路依賴**：新增 Google Fonts 需要外網連線
2. **字體載入**：首次開啟可能有短暫字體閃爍（FOUT）
3. **快取考量**：Google Fonts 會被瀏覽器快取，後續載入更快
4. **相容性**：Noto Sans TC 支援所有現代瀏覽器

### 📊 效能影響
- Google Fonts 載入時間：約 50-100ms
- 字體檔案大小：約 200-300KB（依載入字重而定）
- 對整體效能影響：**可忽略**

---

## 測試建議

### 測試項目
1. ✅ 首頁版本標籤是否完全移除
2. ✅ 步驟指示器三種狀態顯示正確
3. ✅ 主介面文字使用 Noto Sans TC
4. ✅ 圖表文字使用微軟正黑體
5. ✅ 外部資源正常載入（檢查 Network）
6. ✅ 離線環境下字體降級為 Arial/sans-serif

### 測試環境
- Chrome / Edge / Firefox 最新版本
- Windows 10/11 作業系統
- 網路環境與離線環境各測試一次

---

## 修改時程

**預估時間**：30 分鐘

1. 修改項目一：5 分鐘
2. 修改項目二：10 分鐘
3. 修改項目三：10 分鐘
4. 修改項目四：確認即可
5. 測試驗證：5 分鐘

---

## 批准簽名

- [ ] 修改計畫已審閱
- [ ] 同意執行修改
- [ ] 測試計畫已確認

**簽名**：_______________  
**日期**：_______________

---

## 附錄：修改清單

### generate_index_html() 函數修改
- [ ] 移除 `<span class="version-badge">` HTML 標籤
- [ ] 移除 `.version-badge` CSS 樣式
- [ ] 移除步驟圓圈內的數字 1, 2, 3
- [ ] 修改 `.step-circle` CSS（空心設計）
- [ ] 新增 Google Fonts link 標籤
- [ ] 替換 body font-family
- [ ] 替換 .form-select font-family

### generate_result_html() 函數修改
- [ ] 新增 Google Fonts link 標籤
- [ ] 替換 body font-family
- [ ] 替換 .axis-btn font-family

### 圖表函數（無需修改）
- [ ] create_line_chart() - 保持微軟正黑體
- [ ] create_z_anomaly_chart() - 保持微軟正黑體
- [ ] create_wafer_status_dashboard() - 保持微軟正黑體

---

**文件結束**
